<!DOCTYPE html>
<html>
<head>
  <title>Recipe Generator</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
  <h1>Recipe Generator</h1>
  <button id="permuTateBtn">Permu-Tate!</button>
  <div id="recipeContainer"></div>

  <script>
    $(document).ready(function() {
      // Attach a click event listener to the "Permu-Tate" button
      $('#permuTateBtn').on('click', function() {
        // Make an AJAX request to the backend server
        $.ajax({
          url: '/recipes',
          method: 'GET',
          dataType: 'json',
          success: function(data) {
            // Handle the response data and update the HTML content
            let ingredientsList = '<ol>';
            const ingredients = data.ingredients.split(', ');
            ingredients.forEach(function(ingredient) {
              ingredientsList += `<li>${ingredient}</li>`;
            });
            ingredientsList += '</ol>';

            let instructionsList = '<ul>';
            const instructions = data.strInstructions.split('. ');
            instructions.forEach(function(instruction) {
              instructionsList += `<li>${instruction}</li>`;
            });
            instructionsList += '</ul>';

            $('#recipeContainer').html(`
              <h2>${data.strMeal}</h2>
              <img src="${data.strMealThumb}" alt="${data.strMeal}">
              <p>Category: ${data.strCategory}</p>
              <p>Area: ${data.strArea}</p>
              <h3>Instructions:</h3>
              ${instructionsList}
              <h3>Ingredients:</h3>
              ${ingredientsList}
              <p>Tags: ${data.strTags}</p>
              <p>YouTube Video: <a href="${data.strYoutube}" target="_blank">${data.strMeal}</a></p>
            `);
          },
          error: function(error) {
            console.error('Failed to fetch random recipe:', error);
          }
        });
      });
    });
  </script>

</body>
</html>
